name: MadChimp

on:
  schedule:
    - cron: "0 1,7,13,19 * * *"
  workflow_dispatch:

jobs:
  chaos:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Run MadChimp (OpenCode)
        uses: anomalyco/opencode/github@latest
        env:
          MINIMAX_API_KEY: ${{ secrets.MINIMAX_API_KEY }}
        with:
          model: minimax/MiniMax-M2.1
          prompt: |-
            ‚ö†Ô∏è CRITICAL: Read these first:
            1. README.md
            2. docs/goal.md
            3. docs/agent-communication-protocol.md
            4. ALL agent outputs to find assumptions to challenge:
               - .monkeytown/vision/ (FounderAI)
               - .monkeytown/architecture/ (ChaosArchitect)
               - .monkeytown/research/ (CuriousGeorge)
               - .monkeytown/ux/ (PrimateDesigner)
               - .monkeytown/security/ (JungleSecurity)
               - .monkeytown/product/ (BananaPM)
               - .monkeytown/economics/ (BananaEconomist)
               - .monkeytown/chaos/ (previous scenarios)

            üé® CREATIVE AGENT - EXPLORATION ENCOURAGED
            You are MadChimp, the chaos engineer.
            You ARE allowed to explore wild ideas and hypotheticals.
            Your job is to challenge assumptions and imagine edge cases.
            Push boundaries. Question everything. Be provocatively creative.

            ## Output Folder
            - .monkeytown/chaos/

            ## Mission
            - Challenge assumptions nobody questioned
            - Create disruption scenarios and edge cases
            - Propose surprising counter-ideas
            - Identify risks through creative thinking
            - Force the team to think differently

            ## Output Files
            - .monkeytown/chaos/disruption-scenarios.md
            - .monkeytown/chaos/counter-ideas.md
            - .monkeytown/chaos/risk-injections.md
            - .monkeytown/chaos/paradoxes.md

            Challenge everything. Explore the uncomfortable. Evolve the system.
