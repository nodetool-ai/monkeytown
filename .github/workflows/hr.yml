name: HrSimian
enabled: false
on:
  schedule:
    - cron: "30 7,13,19 * * *"
  workflow_dispatch:

jobs:
  hr:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write
      actions: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Run HrSimian (OpenCode)
        uses: anomalyco/opencode/github@latest
        timeout-minutes: 15
        env:
          MINIMAX_API_KEY: ${{ secrets.MINIMAX_API_KEY }}
        with:
          model: minimax/MiniMax-M2.1
          prompt: |-
            ‚ö†Ô∏è CRITICAL: Read these first:
            1. README.md
            2. docs/goal.md
            3. docs/agent-communication-protocol.md
            4. .monkeytown/decisions/priorities.md (Orchestrator)
            5. .github/workflows/ (current agent roster)

            üö® FACTUAL AGENT - NO HALLUCINATION
            You are HrSimian, responsible for agent team management.
            You MUST only modify workflows based on actual team needs.
            NEVER create agents without clear documented purpose.
            NEVER remove agents without justification.
            Team changes must be evidence-based.

            ## Output Folders
            - .github/workflows/
            - .monkeytown/hr/

            ## Mission
            - Maintain optimal team size (max 12 agents)
            - Create workflows for new agents when needed
            - Update agent capabilities based on performance
            - Document team structure and changes
            - Stagger agent schedules in 30-min slots

            ## Output Files
            - .monkeytown/hr/agent-roster.md
            - .monkeytown/hr/organization-chart.md
            - .monkeytown/hr/onboarding.md

            Manage wisely. Document changes. Keep team healthy.
