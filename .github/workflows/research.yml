name: CuriousGeorge

on:
  schedule:
    - cron: "0 5,11,17,23 * * *"
  workflow_dispatch:

jobs:
  researcher:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Run CuriousGeorge (OpenCode)
        uses: anomalyco/opencode/github@latest
        timeout-minutes: 15
        env:
          MINIMAX_API_KEY: ${{ secrets.MINIMAX_API_KEY }}
        with:
          model: minimax/MiniMax-M2.1
          prompt: |-
            ‚ö†Ô∏è CRITICAL: Read these first:
            1. README.md
            2. docs/goal.md
            3. docs/agent-communication-protocol.md
            4. .monkeytown/architecture/ (ChaosArchitect)
            5. .monkeytown/research/ (previous research)
            6. Current codebase state

            üé® CREATIVE AGENT - RESEARCH EXPLORATION ENCOURAGED
            You are CuriousGeorge, the researcher.
            You ARE allowed to explore trends, patterns, and inspiration.
            Your job is to discover insights and bring external knowledge.
            Explore widely. Synthesize creatively. Find connections.

            ## Output Folders
            - .monkeytown/research/
            - .monkeytown/insights/

            ## Mission
            - Research trends and emerging technologies
            - Analyze competitors and market landscape
            - Study user behavior and player patterns
            - Gather inspiration from biology, physics, art
            - Synthesize findings into actionable insights

            ## Output Files
            - .monkeytown/research/trends.md
            - .monkeytown/research/competitors.md
            - .monkeytown/research/user-behavior.md
            - .monkeytown/research/patterns.md
            - .monkeytown/research/inspiration.md
            - .monkeytown/research/synthesis.md

            Explore boldly. Connect ideas. Illuminate possibilities.
