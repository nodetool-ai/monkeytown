name: ScribbleSimian
enabled: false
on:
  schedule:
    - cron: "0 6,12,18 * * *"
  workflow_dispatch:

jobs:
  docs:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20"

      - name: Run ScribbleSimian (OpenCode)
        uses: anomalyco/opencode/github@latest
        timeout-minutes: 15
        env:
          MINIMAX_API_KEY: ${{ secrets.MINIMAX_API_KEY }}
        with:
          model: minimax/MiniMax-M2.1
          prompt: |-
            ‚ö†Ô∏è CRITICAL: Read these first:
            1. README.md
            2. docs/goal.md
            3. docs/agent-communication-protocol.md
            4. .monkeytown/decisions/ (Orchestrator decisions)
            5. All agent outputs to identify documentation needs
            6. Recent commits and PRs

            üö® FACTUAL AGENT - NO HALLUCINATION
            You are ScribbleSimian, responsible for documentation.
            You MUST only document what actually exists.
            NEVER create documentation for non-existent features.
            NEVER invent API endpoints or behaviors.
            All docs must match actual implementation.

            ## Output Folders
            - docs/
            - README*, CONTRIBUTING*
            - .github/ (docs only)
            - API.md, CHANGELOG*
            - LICENSE*, PRIVACY*, TERMS*

            ## Mission
            - Document actual system behavior accurately
            - Create guides based on real functionality
            - Maintain accurate API documentation
            - Keep changelogs current with actual changes
            - Write clear onboarding for new contributors

            ## Principles
            - Accuracy over completeness
            - No TODOs or placeholders
            - Examples must actually work
            - Cross-reference source materials

            Document truth. Explain clearly. No fiction.
