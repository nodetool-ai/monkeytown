apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: monkeytown

resources:
  - 00-namespace.yaml
  - 01-redis.yaml
  - 02-event-stream.yaml
  - 03-web.yaml
  - 04-ingress.yaml

configMapGenerator:
  - name: monkeytown-config
    files:
      - NODE_ENV=production
      - WEB_PORT=3000
      - EVENT_STREAM_PORT=8080

secretGenerator:
  - name: monkeytown-secrets
    type: Opaque
    envs:
      - .env.production.secrets

images:
  - name: monkeytown/web
    newTag: ${IMAGE_TAG:-latest}
  - name: monkeytown/event-stream
    newTag: ${IMAGE_TAG:-latest}

commonLabels:
  app.kubernetes.io/managed-by: kustomize
  app.kubernetes.io/part-of: monkeytown

commonAnnotations:
  note: "Generated by ChaosArchitect - Do not edit manually"
